# Smart Pointer

![CI](https://github.com/jphacks/D_2208/workflows/CI/badge.svg)
![deploy](https://github.com/jphacks/D_2208/workflows/deploy/badge.svg)
![version](https://img.shields.io/badge/version-1.0.0__SNAPSHOT-blue.svg)

[![IMAGE ALT TEXT HERE](https://jphacks.com/wp-content/uploads/2022/08/JPHACKS2022_ogp.jpg)](https://www.youtube.com/watch?v=LUPQFB4QyVo)

## 製品概要

### 共同プレゼンテーション × Tech

あなたのスマホがリモコンに！？

Smart Pointerは手元のスマホをリモコン化する、クラウドベースな共同プレゼンテーション支援ツールです。

> **Note**
>
> 詳細は[PRD (プロダクト要求仕様書)](https://github.com/jphacks/D_2208/wiki/PRD%20(プロダクト要求仕様書))を参照してください

### 背景(製品開発のきっかけ、課題等）

複数人でプレゼンテーションを行う場合、スライドの切り替え担当者とスピーカーが一致しない場合があります。
しかし、スピーカーが逐一「次のスライドお願いします」と依頼するのは面倒であり、聴衆に煩わしさを与える場合もあるでしょう。

そこで、手元のスマートフォンをリモコン化し、リモートにあるホストPCのスライドを共同で操作できるプラットフォームを開発しました。

### 製品説明（具体的な製品の説明）

* ルームの管理
    * スライド投影するホストPCでルームを作成できる
    * 招待リンクを発行し、共同プレゼンターに共有できる
    * 発表が終わったら、ルームを終了できる
* リモコン操作
    * 招待リンクからルームに参加できる
    * 表示名を設定できる
    * タイマーを設定できる
        * 残り時間通知を設定できる
    * スライドを進める/戻すことができる
    * スライド上にポインターを表示できる
    * 上記操作は共同プレゼンター全員に共有される

### 特長

#### 1. リモートからでも共同でスライド操作できる

ホストPCに投影されるスライドを、共同プレゼンター全員が操作可能になります。
ホストPCはルームをホスティングする以外は操作不要で、スマートフォンからのスライド切り替えで発表を行います。

#### 2. 発表をもっと快適に

タイマー設定や現在のスライド番号など、発表に関するステータスが参加者全員に同期されます。
これにより、プレゼンター全員が自分の発表するタイミング、及び残り時間を把握することができます。

#### 3. スライド操作できる人を制限できる

本システムでは同時にスライド操作できる人を制限しています。
これは仮に参加者全員のスマートフォンからスライド切り替え可能だと、押し間違いによる予期せぬスライド操作が懸念されるためです。
現在のスピーカーが次のスピーカーに**ポインタ渡し**することで、ユーザが安心してプレゼンテーションを行えるよう設計しました。

### 解決出来ること

類似した既存のサービスは、自分のPCを自分のスマートフォンから操作するところまでしか実現できていません。
スマートポインターを使えば、 背景説明はAさん、技術説明はBさんが発表担当といったプランの場合に「次のスライドお願いします」とスライド担当者に依頼する必要がなくなります。

### 今後の展望

> TODO: 後ほど記載する

### 注力したこと（こだわり等）

* タイマー設定やスライド切り替え依頼などをシステム側で担うことで、既存の共同プレゼンテーションにおける煩わしさを徹底的に排除した
* 想定されるシナリオを網羅した質の高いテスト

### 用語集

* ルーム
    * 共同プレゼンターが参加し、スライドをリモコン操作するためのワークスペース
* ホストPC
    * [デスクトップアプリケーション](./desktop)を実行する
    * スライド投影するPC
    * OSのメニューバーから操作可能
    * リモコンアクションを購読し、パワーポイントなどのプレゼンテーションソフトウェアを操作する
* リモコン
    * [リモコン用Webアプリ](./app/src/main/pointer)を実行する
    * プレゼンテーション用のレーザーポインター的な概念
    * 自分のスマートフォンをリモコン化し、リモートにあるホストPCのスライドを操作できる！
* ポインタ渡し
    * プレゼンター権限を譲渡する行為

## 開発技術

### 活用した技術

#### フレームワーク・ライブラリ・モジュール

* デスクトップアプリケーション
    * Node.js 16
    * Electron
    * TypeScript
* リモコン用Webアプリ
    * Node.js 16
    * React
    * Vite
    * TypeScript
* APIサーバ
    * Spring Boot 2.7
    * Java OpenJDK 11
    * Spock
    * MySQL 8.0
    * OpenAPI
    * AsyncAPI
* インフラ
    * Google App Engine
    * Google Cloud SQL
    * Google Cloud Storage
    * Google Cloud Scheduler
* CI/CD
    * GitHub Actions
    * Jenkins

#### 通信プロトコル

* HTTP
    * ルームの作成、入室機能をREST APIとして提供します
    * OpenAPIによるスキーマ駆動開発を採用
    * APIドキュメントは[Swagger UI](https://smartpointer.abelab.dev/swagger-ui/index.html)を参照してください
* STOMP(over WebSocket)
    * 軽量なメッセージングプロトコル
    * AsyncAPIによるスキーマ駆動開発を採用
        * AsyncAPIは発展途上であり、コード・ドキュメント生成ツールが貧弱だった
    * APIドキュメントは、[asyncapi.yml](./asyncapi.yml)を[AsyncAPI Studio](https://studio.asyncapi.com/)にペーストすることで閲覧できます

#### アーキテクチャ

リモコン操作を行うモバイル端末と、ルームをホスティングするデスクトップが、APIサーバを介してSTOMP(over WebSocket)で通信します。

スライドのページ遷移、ポインター表示など、モバイル端末からの操作命令をデスクトップアプリケーションが購読し、パワーポイントなどのプレゼンテーションソフトウェアを操作することでリモート&複数人での共同プレゼンテーションを実現しています。

![](https://user-images.githubusercontent.com/50389029/196952980-36fa7fbd-4b96-4f4d-8f92-a0a41eeb0d7f.png)

### 独自技術

#### ハッカソンで開発した独自機能・技術

* ルーム・ユーザ情報を管理するREST API（[Swagger UI](https://smartpointer.abelab.dev/swagger-ui/index.html)）
    * ルーム入室APIから返されたIDトークンを使って、STOMPのトピックをPublish/Subscribeする
* STOMPによる双方向通信API（[asyncapi.yml](./asyncapi.yml)）